{"ast":null,"code":"import React,{useRef,useState,useEffect}from'react';import{Editor,EditorState,RichUtils,getDefaultKeyBinding}from'draft-js';import'draft-js/dist/Draft.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const INLINE_STYLES=[{label:'Bold',style:'BOLD'},{label:'Italic',style:'ITALIC'},{label:'Underline',style:'UNDERLINE'}];const FONT_SIZES=[{value:'12',label:'12'},{value:'14',label:'14'},{value:'16',label:'16'},{value:'18',label:'18'},{value:'20',label:'20'}];const initialEditorState=EditorState.createEmpty();export default function Announcements(){const[editorState,setEditorState]=useState(initialEditorState);const[fontSize,setFontSize]=useState(FONT_SIZES[0].value);const[announcements,setAnnouncements]=useState([]);const editorRef=useRef(null);useEffect(()=>{const fetchAnnouncements=async()=>{try{const response=await fetch('http://localhost:5001/webhook',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({})});if(!response.ok){throw new Error('Network response was not ok');}const data=await response.json();setAnnouncements(data);}catch(error){console.error('Error fetching announcements:',error);}};fetchAnnouncements();},[]);const focusEditor=()=>{if(editorRef.current){editorRef.current.focus();}};const handleInlineStyleToggle=inlineStyle=>{setEditorState(prevState=>RichUtils.toggleInlineStyle(prevState,inlineStyle));focusEditor();};const handleFontSizeChange=event=>{const newFontSize=event.target.value;setFontSize(newFontSize);setEditorState(prevState=>RichUtils.toggleInlineStyle(prevState,\"FONT_SIZE_\".concat(newFontSize)));focusEditor();};const handleKeyCommand=(command,editorState)=>{const newState=RichUtils.handleKeyCommand(editorState,command);if(newState){setEditorState(newState);return true;}return false;};const mapKeyToEditorCommand=e=>{if(e.keyCode===9/* TAB */){const newEditorState=RichUtils.onTab(e,editorState,4/* maxDepth */);if(newEditorState!==editorState){setEditorState(newEditorState);}return;}return getDefaultKeyBinding(e);};const handleEditorChange=newState=>{setEditorState(newState);};const currentInlineStyle=editorState.getCurrentInlineStyle();return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-bold\",children:\"Announcements\"}),announcements.length>0?/*#__PURE__*/_jsx(\"ul\",{children:announcements.map((announcement,index)=>/*#__PURE__*/_jsx(\"li\",{children:JSON.stringify(announcement)},index))}):/*#__PURE__*/_jsx(\"p\",{children:\"No announcements found.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[INLINE_STYLES.map(_ref=>{let{label,style}=_ref;return/*#__PURE__*/_jsx(\"button\",{className:\"\".concat(currentInlineStyle.has(style)?'bg-blue-700':'bg-blue-500 hover:bg-blue-700',\" text-white font-bold py-2 px-4 rounded\"),onMouseDown:e=>{e.preventDefault();// Prevent losing focus\nhandleInlineStyleToggle(style);},children:label},style);}),/*#__PURE__*/_jsx(\"select\",{className:\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\",value:fontSize,onChange:handleFontSizeChange,children:FONT_SIZES.map(_ref2=>{let{value,label}=_ref2;return/*#__PURE__*/_jsx(\"option\",{value:value,children:label},value);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-400 p-4 mt-4 h-64 overflow-y-auto\",children:/*#__PURE__*/_jsx(Editor,{ref:editorRef,editorState:editorState,onChange:handleEditorChange,handleKeyCommand:handleKeyCommand,keyBindingFn:mapKeyToEditorCommand})}),/*#__PURE__*/_jsx(\"button\",{className:\"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\",children:\"Post Announcement\"})]});}","map":{"version":3,"names":["React","useRef","useState","useEffect","Editor","EditorState","RichUtils","getDefaultKeyBinding","jsx","_jsx","jsxs","_jsxs","INLINE_STYLES","label","style","FONT_SIZES","value","initialEditorState","createEmpty","Announcements","editorState","setEditorState","fontSize","setFontSize","announcements","setAnnouncements","editorRef","fetchAnnouncements","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","error","console","focusEditor","current","focus","handleInlineStyleToggle","inlineStyle","prevState","toggleInlineStyle","handleFontSizeChange","event","newFontSize","target","concat","handleKeyCommand","command","newState","mapKeyToEditorCommand","e","keyCode","newEditorState","onTab","handleEditorChange","currentInlineStyle","getCurrentInlineStyle","className","children","length","map","announcement","index","_ref","has","onMouseDown","preventDefault","onChange","_ref2","ref","keyBindingFn"],"sources":["/Users/emiller3425/realEstateClub/web/src/components/Announcements.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport { Editor, EditorState, RichUtils, getDefaultKeyBinding } from 'draft-js';\nimport 'draft-js/dist/Draft.css';\n\nconst INLINE_STYLES = [\n  { label: 'Bold', style: 'BOLD' },\n  { label: 'Italic', style: 'ITALIC' },\n  { label: 'Underline', style: 'UNDERLINE' },\n];\n\nconst FONT_SIZES = [\n  { value: '12', label: '12' },\n  { value: '14', label: '14' },\n  { value: '16', label: '16' },\n  { value: '18', label: '18' },\n  { value: '20', label: '20' },\n];\n\nconst initialEditorState = EditorState.createEmpty();\n\nexport default function Announcements() {\n  const [editorState, setEditorState] = useState(initialEditorState);\n  const [fontSize, setFontSize] = useState(FONT_SIZES[0].value);\n  const [announcements, setAnnouncements] = useState([]);\n  const editorRef = useRef(null);\n\n  useEffect(() => {\n    const fetchAnnouncements = async () => {\n      try {\n        const response = await fetch('http://localhost:5001/webhook', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({}),\n        });\n\n        if (!response.ok) {\n          throw new Error('Network response was not ok');\n        }\n\n        const data = await response.json();\n        setAnnouncements(data);\n      } catch (error) {\n        console.error('Error fetching announcements:', error);\n      }\n    };\n\n    fetchAnnouncements();\n  }, []);\n\n  const focusEditor = () => {\n    if (editorRef.current) {\n      editorRef.current.focus();\n    }\n  };\n\n  const handleInlineStyleToggle = (inlineStyle) => {\n    setEditorState((prevState) => RichUtils.toggleInlineStyle(prevState, inlineStyle));\n    focusEditor();\n  };\n\n  const handleFontSizeChange = (event) => {\n    const newFontSize = event.target.value;\n    setFontSize(newFontSize);\n    setEditorState((prevState) => RichUtils.toggleInlineStyle(prevState, `FONT_SIZE_${newFontSize}`));\n    focusEditor();\n  };\n\n  const handleKeyCommand = (command, editorState) => {\n    const newState = RichUtils.handleKeyCommand(editorState, command);\n    if (newState) {\n      setEditorState(newState);\n      return true;\n    }\n    return false;\n  };\n\n  const mapKeyToEditorCommand = (e) => {\n    if (e.keyCode === 9 /* TAB */) {\n      const newEditorState = RichUtils.onTab(e, editorState, 4 /* maxDepth */);\n      if (newEditorState !== editorState) {\n        setEditorState(newEditorState);\n      }\n      return;\n    }\n    return getDefaultKeyBinding(e);\n  };\n\n  const handleEditorChange = (newState) => {\n    setEditorState(newState);\n  };\n\n  const currentInlineStyle = editorState.getCurrentInlineStyle();\n\n  return (\n    <div className=\"p-4\">\n      <div className=\"mb-4\">\n        <h2 className=\"text-lg font-bold\">Announcements</h2>\n        {announcements.length > 0 ? (\n          <ul>\n            {announcements.map((announcement, index) => (\n              <li key={index}>{JSON.stringify(announcement)}</li>\n            ))}\n          </ul>\n        ) : (\n          <p>No announcements found.</p>\n        )}\n      </div>\n      <div className=\"flex items-center space-x-4\">\n        {INLINE_STYLES.map(({ label, style }) => (\n          <button\n            key={style}\n            className={`${\n              currentInlineStyle.has(style) ? 'bg-blue-700' : 'bg-blue-500 hover:bg-blue-700'\n            } text-white font-bold py-2 px-4 rounded`}\n            onMouseDown={(e) => {\n              e.preventDefault(); // Prevent losing focus\n              handleInlineStyleToggle(style);\n            }}\n          >\n            {label}\n          </button>\n        ))}\n        <select\n          className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\n          value={fontSize}\n          onChange={handleFontSizeChange}\n        >\n          {FONT_SIZES.map(({ value, label }) => (\n            <option key={value} value={value}>\n              {label}\n            </option>\n          ))}\n        </select>\n      </div>\n      <div className=\"border border-gray-400 p-4 mt-4 h-64 overflow-y-auto\">\n        <Editor\n          ref={editorRef}\n          editorState={editorState}\n          onChange={handleEditorChange}\n          handleKeyCommand={handleKeyCommand}\n          keyBindingFn={mapKeyToEditorCommand}\n        />\n      </div>\n      <button className=\"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\">\n        Post Announcement\n      </button>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}